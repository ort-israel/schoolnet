define(["jquery","core/log","filter_poodll/poodll_flashrecorder","filter_poodll/poodll_mediarecorder","filter_poodll/poodll_uploadrecorder","filter_poodll/poodll_mobilerecorder","filter_poodll/poodll_red5recorder"],function(a,b,c,d,e,f,g){"use strict";return b.debug("PoodLL Recorder: initialising"),{init:function(h){var i="#amdopts_"+h.widgetid,j=a(i).get(0);if(!j)return void b.debug("PoodLL Recorder: No config found on page. Giving up.");this.config=JSON.parse(j.value),a(i).remove(),this.config.wwwroot=M.cfg.wwwroot,this.config.sesskey=M.cfg.sesskey;var k=this.config.selector;if(!k)return void b.debug("unable to fetch element with selector:"+this.config.selector);for(var l=!1,m=0;m<this.config.rec_order.length;m++){switch(this.config.rec_order[m]){case"red5":l=g;break;case"flashaudio":l=c;break;case"media":l=d;break;case"upload":l=e;break;case"mobile":l=f}if(l.supports_current_browser(this.config))return void l.embed(k,this.config)}b.debug("none of available recorders works on this browser")}}});